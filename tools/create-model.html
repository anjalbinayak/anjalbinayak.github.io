<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Zend Model Generator</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>


    <link rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.3/styles/default.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.3/highlight.min.js"></script>


    <script src='model.js'></script>
</head>
<body>

    <div class="container">
        <div class='jumbotron'>
        <h2>Create Model</h2>
        
          <div class="form-group">
            <label for="module">Module Name:</label>
            <input type="text" class="form-control" id="module" placeholder="@namespace of module" name="module">
          </div>
          <div class="form-group">
            <label for="table_name">Table Name:</label>
            <input type="text" class="form-control" id="table" placeholder="@Db table Name" name="table_name">
          </div>

          <div class="form-group">
            <label for="pwd">Column Names:</label>
            <textarea class='form-control' id='columns' placeholder='@eg:primary_key,other_columns (separated by comma )' rows=5></textarea>
          </div>

        
          <div class="form-group form-check">
            <label class="form-check-label">
              <input class="form-check-input" type="checkbox" id='getter_setter'> Getter/ Setter
            </label>
          </div>


         
          <button type="submit" id='generate-model' class="btn btn-primary">Create Model</button>
          <button type="submit" id='generate-mapper' class="btn btn-success">Create Mapper</button>
        
      </div>


      <div class="modal fade" id="myModal" role="dialog">
        <div class="modal-dialog">
        
          <!-- Modal content-->
          <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Php Code Generated(Model)</h4>
              <button type="button" class="close" data-dismiss="modal">&times;</button>
              
            </div>
            <div class="modal-body">
              <!-- <textarea class='form-control' rows=10  id='output' ></textarea> -->
              <pre><code id='output' class='php' style='height:300px;overflow: auto;'></code></pre>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-success pull-left" id='copy-model-text' data-toggle='tooltip' title='Copy to clipboard'>Copy & Close</button>
            </div>
          </div>
          
        </div>
      </div>



      <div class="modal fade" id="myMapper" role="dialog">
        <div class="modal-dialog">
        
          <!-- Modal content-->
          <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Php Code Generated (Mapper)</h4>
              <button type="button" class="close" data-dismiss="modal">&times;</button>
              
            </div>
            <div class="modal-body">
                <pre><code id='mapper-output' class='php' style='height:300px;overflow: auto;'></code></pre>
              
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-success pull-left" id='copy-mapper-text' data-toggle='tooltip' title='Copy to clipboard'>Copy & Close</button>
            </div>
          </div>
          
        </div>
      </div>

    </div>


    <div id='model-code' style='display:none'>
&lt;?php

class $className
{

    $columnNames

    public function __construct(array $options = null)
    {
        if (is_array($options)) {
            $this->setOptions($options);
        }
    }

    public function __get($name)
    {
        $parts = explode('_', $name);
        foreach ($parts as $k => $v) {
            $parts[$k] = ucfirst($v);
        }
        $method = 'get' . ucfirst(implode('', $parts));
        if (('mapper' == $name) || ! method_exists($this, $method)) {
            throw new Exception('Invalid content property');
        }
        return $this->$method();
    }

    public function __set($name, $value)
    {
        $parts = explode('_', $name);
        foreach ($parts as $k => $v) {
            $parts[$k] = ucfirst($v);
        }
        $method = 'set' . ucfirst(implode('', $parts));
        if (('mapper' == $name) || ! method_exists($this, $method)) {
            throw new Exception('Invalid content property');
        }
        $this->$method($value);
    }

    public function setOptions(array $options)
    {
        $methods = get_class_methods($this);
        foreach ($options as $key => $value) {
            $parts=explode('_', $key);
            foreach ($parts as $k => $v) {
                $parts[$k]=ucfirst($v);
            }
            $method = 'set' . ucfirst(implode('', $parts));
            if (in_array($method, $methods)) {
                $this->$method($value);
            }
        }
        return $this;
    }

    $getter_setter



    public function save($removeCache = true)
    {
        return getMapper('$tableName', '$namespace')->save($this, $removeCache);
    }

    public function toArray()
    {
        $data = get_class_vars(__CLASS__);
        foreach ($data as $key => $value) {
            $data[$key] = $this->$key;
        }
        return $data;
    }
}

    </div>



<div id='mapper-code' style='display:none'>
    
    &lt;?php

    class className
    {
    
    
        protected static $_instance = null;
    
    
        public static function getInstance()
        {
            if (! self::$_instance instanceof self) {
                self::$_instance = new self();
            }
            return self::$_instance;
        }
    
        public function setDbTable($dbTable)
        {
            if (is_string($dbTable)) {
                $dbTable = new $dbTable();
            }
            if (!$dbTable instanceof Zend_Db_Table_Abstract) {
                throw new Exception('Invalid table data gateway provided');
            }
            $this->_dbTable = $dbTable;
            return $this;
        }
    
        public function getDbTable()
        {
            if (null === $this->_dbTable) {
                $this->setDbTable('modelName');
            }
            return $this->_dbTable;
        }
    
    
       saveFunction
    
    
    
        public function delete($id, $removeCache = true)
        {
            if (is_array($id)) {
                $this->getDbTable()->delete($id);
            } else {
                $this->getDbTable()->delete('id='. $id);
            }
        }
    
    
    
        public function getModelName()
        {
            return 'modelName';
        }
    
        public static function getSelectCacheTag()
        {
            return 'tableName_item';
        }
    }
       

 </div>
        



</body>
</html>